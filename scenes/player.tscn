[gd_scene load_steps=21 format=3 uid="uid://bo0k7rb6v04lk"]

[ext_resource type="PackedScene" uid="uid://2puc6ypy6of" path="res://game_kit/scenes/base_rig/base_rig.tscn" id="1_3vyb7"]
[ext_resource type="Script" uid="uid://bowk70pg6mxsf" path="res://scenes/player.gd" id="1_qlg0r"]
[ext_resource type="Shader" uid="uid://bntbkgw4pwjtp" path="res://game_kit/shaders/set_color.gdshader" id="2_g2els"]
[ext_resource type="Resource" uid="uid://cghosthead001" path="res://resources/parts/ghost_head.tres" id="2_smehm"]
[ext_resource type="Resource" uid="uid://1xamq7y2uemi" path="res://resources/parts/ghost_torso.tres" id="3_ur7pv"]
[ext_resource type="Resource" uid="uid://cghostleg001" path="res://resources/parts/ghost_leg.tres" id="4_ur7pv"]
[ext_resource type="PackedScene" uid="uid://c1ihsj85a28td" path="res://game_kit/ui/components/ui_progress_bar_small.tscn" id="9_ur7pv"]
[ext_resource type="Texture2D" uid="uid://d1o8xk5qcpq61" path="res://assets/chr/chr_ghost_@0.5x.png" id="10_f1ej7"]
[ext_resource type="AudioStream" uid="uid://j17lraixogo4" path="res://assets/sfx/sfx_hurt_normalized.ogg" id="11_d2wvv"]
[ext_resource type="PackedScene" uid="uid://bvgyu4uqoahr" path="res://game_kit/scenes/damage_number/damage_number.tscn" id="12_3v2ag"]
[ext_resource type="AudioStream" uid="uid://b56dhm4178k15" path="res://assets/sfx/sfx_pickup_ou_mai_normalized.ogg" id="13_jej6c"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_smehm"]
size = Vector2(96, 96)

[sub_resource type="ShaderMaterial" id="ShaderMaterial_qhqgy"]
resource_local_to_scene = true
shader = ExtResource("2_g2els")
shader_parameter/active = false
shader_parameter/color = Color(1, 1, 1, 1)

[sub_resource type="Gradient" id="Gradient_d2wvv"]
offsets = PackedFloat32Array(1)
colors = PackedColorArray(1, 1, 1, 1)

[sub_resource type="GradientTexture2D" id="GradientTexture2D_3v2ag"]
gradient = SubResource("Gradient_d2wvv")
width = 256
height = 128

[sub_resource type="ShaderMaterial" id="ShaderMaterial_3v2ag"]
shader = ExtResource("2_g2els")
shader_parameter/active = false
shader_parameter/color = Color(1, 1, 1, 1)

[sub_resource type="GradientTexture2D" id="GradientTexture2D_y4r1p"]
gradient = SubResource("Gradient_d2wvv")
width = 256
height = 62

[sub_resource type="GradientTexture2D" id="GradientTexture2D_d2wvv"]
gradient = SubResource("Gradient_d2wvv")
width = 256
height = 85

[sub_resource type="RectangleShape2D" id="RectangleShape2D_ur7pv"]
resource_local_to_scene = true
size = Vector2(128, 224)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_y4r1p"]
resource_local_to_scene = true
size = Vector2(64, 144)

[node name="Player" type="CharacterBody2D"]
z_index = 5
y_sort_enabled = true
collision_layer = 2
script = ExtResource("1_qlg0r")
head = ExtResource("2_smehm")
torso = ExtResource("3_ur7pv")
legs = ExtResource("4_ur7pv")

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
position = Vector2(0, -48)
shape = SubResource("RectangleShape2D_smehm")

[node name="BaseRig" parent="." instance=ExtResource("1_3vyb7")]

[node name="AnimationRig" parent="BaseRig" index="0"]
material = SubResource("ShaderMaterial_qhqgy")

[node name="Body" parent="BaseRig/AnimationRig" index="1"]
visible = false

[node name="HeadMask" type="Sprite2D" parent="BaseRig/AnimationRig" index="2"]
clip_children = 1
position = Vector2(0, -68)
texture = SubResource("GradientTexture2D_3v2ag")

[node name="HeadTexture" type="Sprite2D" parent="BaseRig/AnimationRig/HeadMask"]
unique_name_in_owner = true
material = SubResource("ShaderMaterial_3v2ag")
position = Vector2(0, 63)
texture = ExtResource("10_f1ej7")

[node name="TorsoMask" type="Sprite2D" parent="BaseRig/AnimationRig" index="3"]
clip_children = 1
position = Vector2(0, 27)
texture = SubResource("GradientTexture2D_y4r1p")

[node name="TorsoTexture" type="Sprite2D" parent="BaseRig/AnimationRig/TorsoMask"]
unique_name_in_owner = true
material = SubResource("ShaderMaterial_3v2ag")
position = Vector2(0, -32)
texture = ExtResource("10_f1ej7")

[node name="LegMask" type="Sprite2D" parent="BaseRig/AnimationRig" index="4"]
clip_children = 1
position = Vector2(0, 99)
texture = SubResource("GradientTexture2D_d2wvv")

[node name="LegTexture" type="Sprite2D" parent="BaseRig/AnimationRig/LegMask"]
unique_name_in_owner = true
material = SubResource("ShaderMaterial_3v2ag")
position = Vector2(0, -104)
texture = ExtResource("10_f1ej7")

[node name="HealthBar" parent="BaseRig" instance=ExtResource("9_ur7pv")]
unique_name_in_owner = true
offset_left = -48.0
offset_top = -240.0
offset_bottom = -232.0
theme_type_variation = &"ProgressBarHealth"
value = 100.0

[node name="DamageNumber" parent="BaseRig" instance=ExtResource("12_3v2ag")]
position = Vector2(32, -192)

[node name="Usebox" type="Area2D" parent="."]
visible = false
collision_layer = 0
collision_mask = 16
monitorable = false

[node name="UseboxCollider" type="CollisionShape2D" parent="Usebox"]
unique_name_in_owner = true
position = Vector2(0, -112)
shape = SubResource("RectangleShape2D_ur7pv")
debug_color = Color(0.713726, 0.141176, 0.709804, 0.301961)

[node name="Hurtbox" type="Area2D" parent="."]
collision_layer = 64
collision_mask = 0
monitoring = false

[node name="HurtboxCollider" type="CollisionShape2D" parent="Hurtbox"]
unique_name_in_owner = true
position = Vector2(0, -88)
shape = SubResource("RectangleShape2D_y4r1p")
debug_color = Color(0.235294, 0.521569, 0.345098, 0.407843)

[node name="HurtSfx" type="AudioStreamPlayer2D" parent="."]
unique_name_in_owner = true
stream = ExtResource("11_d2wvv")
bus = &"Sfx"

[node name="ShootSfx" type="AudioStreamPlayer2D" parent="."]
unique_name_in_owner = true
bus = &"Sfx"

[node name="BulletSpawn" type="Marker2D" parent="."]
unique_name_in_owner = true
position = Vector2(0, -96)

[node name="DeathSfx" type="AudioStreamPlayer2D" parent="."]
unique_name_in_owner = true
stream = ExtResource("13_jej6c")

[node name="RegenTimer" type="Timer" parent="."]
unique_name_in_owner = true
wait_time = 3.0
autostart = true

[connection signal="area_entered" from="Usebox" to="." method="_on_usebox_area_entered"]
[connection signal="timeout" from="RegenTimer" to="." method="_on_regen_timer_timeout"]

[editable path="BaseRig"]
